<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>COBAAJA88 - Depo QRIS</title>
  <style>
    body { margin:0; font-family:Arial,sans-serif; background:#0a0a15; color:#e0e0ff; min-height:100vh; display:flex; justify-content:center; align-items:center; padding:20px; }
    .container { background:rgba(20,20,50,0.8); border:1px solid #00d4ff; border-radius:16px; padding:30px; max-width:420px; width:100%; box-shadow:0 0 30px rgba(0,212,255,0.2); text-align:center; }
    h1 { color:#00ffea; text-shadow:0 0 15px #00ffea; }
    input { width:100%; padding:14px; font-size:1.2em; border:2px solid #00d4ff; border-radius:10px; background:#111133; color:white; text-align:center; margin:15px 0; }
    button { background:linear-gradient(45deg,#00d4ff,#ff00aa); border:none; color:white; padding:16px 40px; font-size:1.2em; border-radius:50px; cursor:pointer; box-shadow:0 5px 15px rgba(0,212,255,0.4); transition:all 0.3s; }
    button:hover { transform:translateY(-3px); box-shadow:0 10px 25px rgba(0,212,255,0.6); }
    button:disabled { opacity:0.5; }
    #qris-section { margin-top:30px; display:none; }
    #qris-image { max-width:280px; border:3px solid #00ffea; border-radius:12px; box-shadow:0 0 20px rgba(0,255,234,0.5); }
    .error { color:#ff4d4d; font-weight:bold; margin-top:10px; }
    .loading { color:#00ffea; margin:15px 0; }
  </style>
</head>
<body>
  <div class="container">
    <h1>COBAAJA88 Depo QRIS</h1>
    <input type="number" id="nominal" placeholder="Masukkan nominal (10k-10jt)" min="10000" max="10000000">
    <button id="btn">Generate QRIS</button>
    <div class="loading" id="loading" style="display:none;">Sedang generate...</div>
    <div id="qris-section">
      <h3>Scan QRIS</h3>
      <img id="qris-image" src="" alt="QRIS">
      <p>Nominal: Rp <span id="nominal-show">0</span><br>Merchant: Toko Gulbat<br>Expire ~15 menit</p>
    </div>
    <p id="error" class="error"></p>
  </div>

  <script>
    const btn = document.getElementById('btn');
    const nominalEl = document.getElementById('nominal');
    const loading = document.getElementById('loading');
    const section = document.getElementById('qris-section');
    const img = document.getElementById('qris-image');
    const showNominal = document.getElementById('nominal-show');
    const errorEl = document.getElementById('error');

    btn.onclick = async () => {
      errorEl.textContent = '';
      const amt = parseInt(nominalEl.value);
      if (!amt || amt < 10000 || amt > 10000000) {
        errorEl.textContent = 'Nominal 10.000 - 10.000.000!';
        return;
      }

      btn.disabled = true;
      loading.style.display = 'block';

      try {
        const res = await fetch(`https://qris-api-cobaaaja88.vercel.app/api/qris?amount=${amt}`);  // GANTI NAMA PROJECT VERCEL LO
        const data = await res.json();

        if (data.success) {
          img.src = data.qr_image_base64;
          showNominal.textContent = amt.toLocaleString('id-ID');
          section.style.display = 'block';
        } else {
          errorEl.textContent = data.error || 'Gagal!';
        }
      } catch (e) {
        errorEl.textContent = 'Koneksi gagal: ' + e.message;
      } finally {
        btn.disabled = false;
        loading.style.display = 'none';
      }
    };

    nominalEl.onkeypress = (e) => { if (e.key === 'Enter') btn.click(); };
  </script>
</body>
</html>
